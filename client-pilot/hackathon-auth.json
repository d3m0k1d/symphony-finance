{
  "components": {
    "schemas": {
      "AccountCloseRequest": {
        "description": "Запрос на закрытие счета с переводом остатка",
        "properties": {
          "action": {
            "title": "Action",
            "type": "string"
          },
          "destination_account_id": {
            "nullable": true,
            "title": "Destination Account Id",
            "type": "string"
          }
        },
        "required": [
          "action"
        ],
        "title": "AccountCloseRequest",
        "type": "object"
      },
      "AccountStatusUpdate": {
        "description": "Обновление статуса счета",
        "properties": {
          "status": {
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "status"
        ],
        "title": "AccountStatusUpdate",
        "type": "object"
      },
      "BankSettingsUpdate": {
        "description": "Обновление настроек банка",
        "properties": {
          "auto_approve_consents": {
            "title": "Auto Approve Consents",
            "type": "boolean"
          }
        },
        "required": [
          "auto_approve_consents"
        ],
        "title": "BankSettingsUpdate",
        "type": "object"
      },
      "Body_banker_login_auth_banker_login_post": {
        "properties": {
          "password": {
            "title": "Password",
            "type": "string"
          },
          "username": {
            "title": "Username",
            "type": "string"
          }
        },
        "required": [
          "username",
          "password"
        ],
        "title": "Body_banker_login_auth_banker_login_post",
        "type": "object"
      },
      "Body_upload_teams_admin_teams_upload_post": {
        "properties": {
          "file": {
            "format": "binary",
            "title": "File",
            "type": "string"
          }
        },
        "required": [
          "file"
        ],
        "title": "Body_upload_teams_admin_teams_upload_post",
        "type": "object"
      },
      "CloseAgreementRequest": {
        "description": "Запрос на закрытие договора с погашением",
        "properties": {
          "repayment_account_id": {
            "nullable": true,
            "title": "Repayment Account Id",
            "type": "string"
          },
          "repayment_amount": {
            "nullable": true,
            "title": "Repayment Amount",
            "type": "number"
          }
        },
        "title": "CloseAgreementRequest",
        "type": "object"
      },
      "ConsentCreateRequest": {
        "description": "Запрос создания согласия (OpenBanking Russia format)",
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ConsentDataRequest"
          },
          "risk": {
            "default": {},
            "nullable": true,
            "title": "Risk",
            "type": "object"
          }
        },
        "required": [
          "data"
        ],
        "title": "ConsentCreateRequest",
        "type": "object"
      },
      "ConsentData": {
        "description": "Данные согласия в ответе",
        "properties": {
          "consentId": {
            "title": "Consentid",
            "type": "string"
          },
          "creationDateTime": {
            "title": "Creationdatetime",
            "type": "string"
          },
          "expirationDateTime": {
            "nullable": true,
            "title": "Expirationdatetime",
            "type": "string"
          },
          "permissions": {
            "items": {
              "type": "string"
            },
            "title": "Permissions",
            "type": "array"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "statusUpdateDateTime": {
            "title": "Statusupdatedatetime",
            "type": "string"
          }
        },
        "required": [
          "consentId",
          "status",
          "creationDateTime",
          "statusUpdateDateTime",
          "permissions"
        ],
        "title": "ConsentData",
        "type": "object"
      },
      "ConsentDataRequest": {
        "description": "Data для создания согласия",
        "properties": {
          "expirationDateTime": {
            "nullable": true,
            "title": "Expirationdatetime",
            "type": "string"
          },
          "permissions": {
            "description": "ReadAccountsDetail, ReadBalances, ReadTransactionsDetail",
            "items": {
              "type": "string"
            },
            "title": "Permissions",
            "type": "array"
          },
          "transactionFromDateTime": {
            "nullable": true,
            "title": "Transactionfromdatetime",
            "type": "string"
          },
          "transactionToDateTime": {
            "nullable": true,
            "title": "Transactiontodatetime",
            "type": "string"
          }
        },
        "required": [
          "permissions"
        ],
        "title": "ConsentDataRequest",
        "type": "object"
      },
      "ConsentRequestBody": {
        "description": "Body для запроса согласия",
        "properties": {
          "client_id": {
            "title": "Client Id",
            "type": "string"
          },
          "permissions": {
            "items": {
              "type": "string"
            },
            "title": "Permissions",
            "type": "array"
          },
          "reason": {
            "default": "",
            "title": "Reason",
            "type": "string"
          },
          "requesting_bank": {
            "default": "test_bank",
            "title": "Requesting Bank",
            "type": "string"
          },
          "requesting_bank_name": {
            "default": "Test Bank",
            "title": "Requesting Bank Name",
            "type": "string"
          }
        },
        "required": [
          "client_id",
          "permissions"
        ],
        "title": "ConsentRequestBody",
        "type": "object"
      },
      "ConsentResponse": {
        "description": "Ответ с согласием",
        "properties": {
          "data": {
            "$ref": "#/components/schemas/ConsentData"
          },
          "links": {
            "title": "Links",
            "type": "object"
          },
          "meta": {
            "default": {},
            "nullable": true,
            "title": "Meta",
            "type": "object"
          }
        },
        "required": [
          "data",
          "links"
        ],
        "title": "ConsentResponse",
        "type": "object"
      },
      "CreateAccountRequest": {
        "description": "Запрос на создание нового счета",
        "properties": {
          "account_type": {
            "title": "Account Type",
            "type": "string"
          },
          "initial_balance": {
            "default": 0,
            "title": "Initial Balance",
            "type": "number"
          }
        },
        "required": [
          "account_type"
        ],
        "title": "CreateAccountRequest",
        "type": "object"
      },
      "CustomerLeadRequest": {
        "description": "Запрос на создание лида",
        "properties": {
          "email": {
            "nullable": true,
            "title": "Email",
            "type": "string"
          },
          "estimated_income": {
            "nullable": true,
            "title": "Estimated Income",
            "type": "number"
          },
          "full_name": {
            "title": "Full Name",
            "type": "string"
          },
          "interested_products": {
            "default": [],
            "nullable": true,
            "title": "Interested Products",
            "type": "array"
          },
          "notes": {
            "nullable": true,
            "title": "Notes",
            "type": "string"
          },
          "phone": {
            "nullable": true,
            "title": "Phone",
            "type": "string"
          },
          "source": {
            "default": "api",
            "nullable": true,
            "title": "Source",
            "type": "string"
          }
        },
        "required": [
          "full_name"
        ],
        "title": "CustomerLeadRequest",
        "type": "object"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "title": "Detail",
            "type": "array"
          }
        },
        "title": "HTTPValidationError",
        "type": "object"
      },
      "KeyRateUpdate": {
        "description": "Обновление ключевой ставки",
        "properties": {
          "changed_by": {
            "default": "admin",
            "title": "Changed By",
            "type": "string"
          },
          "rate": {
            "title": "Rate",
            "type": "number"
          }
        },
        "required": [
          "rate"
        ],
        "title": "KeyRateUpdate",
        "type": "object"
      },
      "LoginRequest": {
        "properties": {
          "password": {
            "title": "Password",
            "type": "string"
          },
          "username": {
            "title": "Username",
            "type": "string"
          }
        },
        "required": [
          "username",
          "password"
        ],
        "title": "LoginRequest",
        "type": "object"
      },
      "LoginResponse": {
        "properties": {
          "access_token": {
            "title": "Access Token",
            "type": "string"
          },
          "client_id": {
            "title": "Client Id",
            "type": "string"
          },
          "token_type": {
            "title": "Token Type",
            "type": "string"
          }
        },
        "required": [
          "access_token",
          "token_type",
          "client_id"
        ],
        "title": "LoginResponse",
        "type": "object"
      },
      "PaymentData": {
        "description": "Данные платежа в ответе",
        "properties": {
          "creationDateTime": {
            "title": "Creationdatetime",
            "type": "string"
          },
          "paymentId": {
            "title": "Paymentid",
            "type": "string"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "statusUpdateDateTime": {
            "title": "Statusupdatedatetime",
            "type": "string"
          }
        },
        "required": [
          "paymentId",
          "status",
          "creationDateTime",
          "statusUpdateDateTime"
        ],
        "title": "PaymentData",
        "type": "object"
      },
      "PaymentRequest": {
        "description": "Запрос создания платежа (OpenBanking Russia format)",
        "properties": {
          "data": {
            "description": "Содержит initiation",
            "title": "Data",
            "type": "object"
          },
          "risk": {
            "default": {},
            "nullable": true,
            "title": "Risk",
            "type": "object"
          }
        },
        "required": [
          "data"
        ],
        "title": "PaymentRequest",
        "type": "object"
      },
      "PaymentResponse": {
        "description": "Ответ с платежом",
        "properties": {
          "data": {
            "$ref": "#/components/schemas/PaymentData"
          },
          "links": {
            "title": "Links",
            "type": "object"
          },
          "meta": {
            "default": {},
            "nullable": true,
            "title": "Meta",
            "type": "object"
          }
        },
        "required": [
          "data",
          "links"
        ],
        "title": "PaymentResponse",
        "type": "object"
      },
      "ProductAgreementRequest": {
        "description": "Запрос на открытие продукта",
        "properties": {
          "amount": {
            "title": "Amount",
            "type": "number"
          },
          "product_id": {
            "title": "Product Id",
            "type": "string"
          },
          "source_account_id": {
            "nullable": true,
            "title": "Source Account Id",
            "type": "string"
          },
          "term_months": {
            "nullable": true,
            "title": "Term Months",
            "type": "integer"
          }
        },
        "required": [
          "product_id",
          "amount"
        ],
        "title": "ProductAgreementRequest",
        "type": "object"
      },
      "ProductApplicationRequest": {
        "description": "Запрос на подачу заявки",
        "properties": {
          "application_data": {
            "nullable": true,
            "title": "Application Data",
            "type": "object"
          },
          "product_id": {
            "title": "Product Id",
            "type": "string"
          },
          "requested_amount": {
            "title": "Requested Amount",
            "type": "number"
          },
          "requested_term_months": {
            "nullable": true,
            "title": "Requested Term Months",
            "type": "integer"
          }
        },
        "required": [
          "product_id",
          "requested_amount"
        ],
        "title": "ProductApplicationRequest",
        "type": "object"
      },
      "ProductOfferConsentRequest": {
        "description": "Запрос на создание согласия",
        "properties": {
          "customer_lead_id": {
            "nullable": true,
            "title": "Customer Lead Id",
            "type": "string"
          },
          "expires_days": {
            "default": 365,
            "nullable": true,
            "title": "Expires Days",
            "type": "integer"
          },
          "permissions": {
            "items": {
              "type": "string"
            },
            "title": "Permissions",
            "type": "array"
          }
        },
        "required": [
          "permissions"
        ],
        "title": "ProductOfferConsentRequest",
        "type": "object"
      },
      "ProductOfferRequest": {
        "description": "Запрос на создание персонального предложения",
        "properties": {
          "customer_lead_id": {
            "nullable": true,
            "title": "Customer Lead Id",
            "type": "string"
          },
          "personalized_amount": {
            "nullable": true,
            "title": "Personalized Amount",
            "type": "number"
          },
          "personalized_rate": {
            "nullable": true,
            "title": "Personalized Rate",
            "type": "number"
          },
          "personalized_term_months": {
            "nullable": true,
            "title": "Personalized Term Months",
            "type": "integer"
          },
          "product_id": {
            "title": "Product Id",
            "type": "string"
          },
          "valid_days": {
            "default": 30,
            "nullable": true,
            "title": "Valid Days",
            "type": "integer"
          }
        },
        "required": [
          "product_id"
        ],
        "title": "ProductOfferRequest",
        "type": "object"
      },
      "ProductUpdate": {
        "description": "Обновление продукта",
        "properties": {
          "interest_rate": {
            "title": "Interest Rate",
            "type": "number"
          },
          "is_active": {
            "title": "Is Active",
            "type": "boolean"
          },
          "max_amount": {
            "title": "Max Amount",
            "type": "number"
          },
          "min_amount": {
            "title": "Min Amount",
            "type": "number"
          }
        },
        "title": "ProductUpdate",
        "type": "object"
      },
      "RandomClientResponse": {
        "properties": {
          "full_name": {
            "title": "Full Name",
            "type": "string"
          },
          "password": {
            "title": "Password",
            "type": "string"
          },
          "person_id": {
            "title": "Person Id",
            "type": "string"
          }
        },
        "required": [
          "person_id",
          "full_name",
          "password"
        ],
        "title": "RandomClientResponse",
        "type": "object"
      },
      "SignConsentBody": {
        "description": "Body для подписания согласия",
        "properties": {
          "action": {
            "title": "Action",
            "type": "string"
          },
          "request_id": {
            "title": "Request Id",
            "type": "string"
          },
          "signature": {
            "default": "password",
            "title": "Signature",
            "type": "string"
          }
        },
        "required": [
          "request_id",
          "action"
        ],
        "title": "SignConsentBody",
        "type": "object"
      },
      "VRPConsentRequest": {
        "description": "Запрос на создание VRP согласия",
        "properties": {
          "account_id": {
            "title": "Account Id",
            "type": "string"
          },
          "max_amount_period": {
            "nullable": true,
            "title": "Max Amount Period",
            "type": "number"
          },
          "max_individual_amount": {
            "title": "Max Individual Amount",
            "type": "number"
          },
          "max_payments_count": {
            "nullable": true,
            "title": "Max Payments Count",
            "type": "integer"
          },
          "period_type": {
            "default": "month",
            "nullable": true,
            "title": "Period Type",
            "type": "string"
          },
          "valid_days": {
            "default": 365,
            "nullable": true,
            "title": "Valid Days",
            "type": "integer"
          }
        },
        "required": [
          "account_id",
          "max_individual_amount"
        ],
        "title": "VRPConsentRequest",
        "type": "object"
      },
      "VRPPaymentRequest": {
        "description": "Запрос на создание VRP платежа",
        "properties": {
          "amount": {
            "title": "Amount",
            "type": "number"
          },
          "description": {
            "nullable": true,
            "title": "Description",
            "type": "string"
          },
          "destination_account": {
            "title": "Destination Account",
            "type": "string"
          },
          "destination_bank": {
            "nullable": true,
            "title": "Destination Bank",
            "type": "string"
          },
          "is_recurring": {
            "default": true,
            "nullable": true,
            "title": "Is Recurring",
            "type": "boolean"
          },
          "recurrence_frequency": {
            "default": "monthly",
            "nullable": true,
            "title": "Recurrence Frequency",
            "type": "string"
          },
          "vrp_consent_id": {
            "title": "Vrp Consent Id",
            "type": "string"
          }
        },
        "required": [
          "vrp_consent_id",
          "amount",
          "destination_account"
        ],
        "title": "VRPPaymentRequest",
        "type": "object"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "title": "Location",
            "type": "array"
          },
          "msg": {
            "title": "Message",
            "type": "string"
          },
          "type": {
            "title": "Error Type",
            "type": "string"
          }
        },
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError",
        "type": "object"
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "scheme": "bearer",
        "type": "http"
      }
    }
  },
  "info": {
    "description": "\n# Virtual Bank API\n\nOpenBanking Russia v2.1 совместимый API для разработки финансовых приложений.\n\n## Как начать работу\n\n**Шаг 1:** Получите токен через `POST /auth/bank-token` (раздел \"🚀 Start Here\")\n\n**Шаг 2:** Используйте токен во всех запросах:\n```\nAuthorization: Bearer <your_token>\n```\n\n**Шаг 3:** Вызывайте API (Большенство API требуют согласия для межбанковых запросов):\n\n    ",
    "title": "Virtual Bank API",
    "version": "2.1"
  },
  "openapi": "3.1.0",
  "paths": {
    "/account-consents": {
      "post": {
        "description": "Создание ресурса согласия на доступ к счету\n\nOpenBanking Russia Account-Consents API v2.1\nPOST /account-consents",
        "operationId": "create_account_access_consents_account_consents_post",
        "parameters": [
          {
            "in": "header",
            "name": "x-fapi-interaction-id",
            "required": false,
            "schema": {
              "nullable": true,
              "title": "X-Fapi-Interaction-Id",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConsentCreateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsentResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Create Account Access Consents",
        "tags": [
          "01 OpenBanking: Account-Consents"
        ]
      }
    },
    "/account-consents/my-consents": {
      "get": {
        "description": "Получить все активные согласия клиента",
        "operationId": "get_my_consents_account_consents_my_consents_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Get My Consents",
        "tags": [
          "01 OpenBanking: Account-Consents"
        ]
      }
    },
    "/account-consents/my-consents/{consent_id}": {
      "delete": {
        "description": "Отозвать согласие",
        "operationId": "revoke_consent_account_consents_my_consents__consent_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "consent_id",
            "required": true,
            "schema": {
              "title": "Consent Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Revoke Consent",
        "tags": [
          "01 OpenBanking: Account-Consents"
        ]
      }
    },
    "/account-consents/request": {
      "post": {
        "description": "## 🤝 Запрос согласия от другого банка (межбанковый сценарий)\n\n**Кастомный endpoint для федеративного взаимодействия.**\n\n### Сценарий использования:\n\n1. **Ситуация:** Клиент авторизован в VBank и хочет видеть счета из ABank в приложении VBank\n2. **Решение:** VBank запрашивает согласие у ABank на доступ к счетам клиента\n\n### Пример запроса:\n```json\nPOST http://localhost:8002/account-consents/request\nHeaders:\n  X-Requesting-Bank: vbank\nBody:\n{\n  \"client_id\": \"cli-ab-001\",\n  \"permissions\": [\"ReadAccountsDetail\", \"ReadBalances\", \"ReadTransactionsDetail\"],\n  \"reason\": \"Мультибанковое приложение VBank\",\n  \"requesting_bank\": \"vbank\",\n  \"requesting_bank_name\": \"Victory Bank\"\n}\n```\n\n### Что происходит:\n1. ABank создает запрос согласия для клиента `cli-ab-001`\n2. Клиент получает уведомление в ABank\n3. Клиент одобряет/отклоняет через ABank UI или API\n4. После одобрения VBank может запрашивать данные с заголовком `X-Requesting-Bank: vbank`\n\n### ⚠️ Важно:\n- **НЕ из OpenBanking Russia стандарта** (кастомное расширение для sandbox)\n- В production используйте OAuth 2.0 Authorization Code Flow\n- Согласие имеет срок действия (по умолчанию 90 дней)",
        "operationId": "request_consent_account_consents_request_post",
        "parameters": [
          {
            "in": "header",
            "name": "x-requesting-bank",
            "required": false,
            "schema": {
              "nullable": true,
              "title": "X-Requesting-Bank",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConsentRequestBody"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Request Consent",
        "tags": [
          "01 OpenBanking: Account-Consents"
        ]
      }
    },
    "/account-consents/requests": {
      "get": {
        "description": "Получить все запросы на согласие для клиента",
        "operationId": "get_consent_requests_account_consents_requests_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Get Consent Requests",
        "tags": [
          "01 OpenBanking: Account-Consents"
        ]
      }
    },
    "/account-consents/sign": {
      "post": {
        "description": "Подписание или отклонение согласия клиентом\n\nНе из стандарта, но необходимо для процесса подписания",
        "operationId": "sign_consent_account_consents_sign_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignConsentBody"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Sign Consent",
        "tags": [
          "01 OpenBanking: Account-Consents"
        ]
      }
    },
    "/account-consents/{consent_id}": {
      "delete": {
        "description": "Удаление ресурса согласия\n\nOpenBanking Russia Account-Consents API v2.1\nDELETE /account-consents/{consentId}",
        "operationId": "delete_account_access_consents_consent_id_account_consents__consent_id__delete",
        "parameters": [
          {
            "in": "path",
            "name": "consent_id",
            "required": true,
            "schema": {
              "title": "Consent Id",
              "type": "string"
            }
          },
          {
            "in": "header",
            "name": "x-fapi-interaction-id",
            "required": false,
            "schema": {
              "nullable": true,
              "title": "X-Fapi-Interaction-Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Delete Account Access Consents Consent Id",
        "tags": [
          "01 OpenBanking: Account-Consents"
        ]
      },
      "get": {
        "description": "Получение ресурса согласия\n\nOpenBanking Russia Account-Consents API v2.1\nGET /account-consents/{consentId}",
        "operationId": "get_account_access_consents_consent_id_account_consents__consent_id__get",
        "parameters": [
          {
            "in": "path",
            "name": "consent_id",
            "required": true,
            "schema": {
              "title": "Consent Id",
              "type": "string"
            }
          },
          {
            "in": "header",
            "name": "x-fapi-interaction-id",
            "required": false,
            "schema": {
              "nullable": true,
              "title": "X-Fapi-Interaction-Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConsentResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Get Account Access Consents Consent Id",
        "tags": [
          "01 OpenBanking: Account-Consents"
        ]
      }
    },
    "/auth/bank-token": {
      "post": {
        "description": "## 🎯 Получение токена для работы с API банка\n\n**Этот endpoint - точка входа для всех участников хакатона!**\n\nТокен выдается банком, У КОТОРОГО вы запрашиваете данные.\nКаждый банк подписывает токен своим приватным ключом (RS256).\n\n### Где взять credentials?\n\nПолучите у организаторов хакатона:\n- `client_id` — код вашей команды (например: team200)\n- `client_secret` — ваш секретный ключ (API key)\n\n### Пример запроса:\n\n```bash\n# Получить токен для запросов к VBank\nPOST https://vbank.open.bankingapi.ru/auth/bank-token\n?client_id=team200\n&client_secret=5OAaa4DYzYKfnOU6zbR34ic5qMm7VSMB\n\n# Ответ:\n{\n  \"access_token\": \"eyJ...\",\n  \"token_type\": \"bearer\",\n  \"client_id\": \"team200\",\n  \"expires_in\": 86400\n}\n```\n\n### Использование токена:\n\n```bash\nGET https://vbank.open.bankingapi.ru/accounts\nHeaders:\n  Authorization: Bearer eyJ...\n```\n\n### Важно:\n\n- Токен валиден 24 часа\n- Для каждого банка нужен свой токен (VBank, ABank, SBank)\n- Токен подписан приватным ключом банка (RS256)\n- Публичный ключ: `/.well-known/jwks.json`\n\n### Межбанковые запросы:\n\nДля получения данных клиента из другого банка добавьте:\n```\nX-Requesting-Bank: your_client_id\n```\nИ создайте согласие: `POST /account-consents`",
        "operationId": "create_bank_token_auth_bank_token_post",
        "parameters": [
          {
            "in": "query",
            "name": "client_id",
            "required": true,
            "schema": {
              "title": "Client Id",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "client_secret",
            "required": true,
            "schema": {
              "title": "Client Secret",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Bank Token",
        "tags": [
          "Internal: Auth",
          "🚀 Start Here"
        ]
      }
    },
    "/auth/banker-login": {
      "post": {
        "description": "Авторизация сотрудника банка\n\nДля доступа к Banker UI и управления продуктами банка.",
        "operationId": "banker_login_auth_banker_login_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_banker_login_auth_banker_login_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Banker Login",
        "tags": [
          "Internal: Auth"
        ]
      }
    },
    "/auth/login": {
      "post": {
        "description": "Авторизация клиента в веб-интерфейсе банка\n\n⚠️ **Для встроенного UI банка, НЕ для внешних приложений**\n\nЭтот endpoint используется клиентским интерфейсом банка для входа пользователя.\nВнешние приложения должны использовать стандартный OAuth 2.0 flow.\n\n**Пример:**\n```json\n{\n  \"username\": \"cli-vb-001\",\n  \"password\": \"password\"\n}\n```\n\n**Ответ:**\n- `access_token` — JWT токен (валиден 24 часа)\n- `token_type` — \"bearer\"\n- `client_id` — ID клиента\n\nИспользуйте токен в заголовке: `Authorization: Bearer <token>`",
        "operationId": "login_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Login",
        "tags": [
          "Internal: Auth"
        ]
      }
    },
    "/auth/me": {
      "get": {
        "description": "Получение информации о текущем клиенте",
        "operationId": "get_current_user_auth_me_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {}
              }
            },
            "description": "Successful Response"
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "summary": "Get Current User",
        "tags": [
          "Internal: Auth"
        ]
      }
    },
    "/auth/random-demo-client": {
      "get": {
        "description": "Получить случайного клиента для тестирования\n\nВозвращает случайного клиента с богатой историей транзакций\nдля быстрого тестирования интерфейса.",
        "operationId": "get_random_demo_client_auth_random_demo_client_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RandomClientResponse"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Get Random Demo Client",
        "tags": [
          "Internal: Auth"
        ]
      }
    }
  },
  "tags": [
    {
      "description": "Начните отсюда — получите токен для работы с API",
      "name": "🚀 Start Here"
    },
    {
      "description": "OpenBanking Russia v2.1 — согласия на доступ",
      "name": "01 OpenBanking: Account-Consents"
    },
    {
      "description": "OpenBanking Russia v2.1 — счета и балансы",
      "name": "02 OpenBanking: Accounts"
    },
    {
      "description": "OpenBanking Russia — разовые платежи",
      "name": "03 OpenBanking: Payments"
    },
    {
      "description": "Согласия на периодические переводы",
      "name": "04 OpenBanking: VRP Consents"
    },
    {
      "description": "Периодические платежи с переменными реквизитами",
      "name": "05 OpenBanking: VRP Payments"
    },
    {
      "description": "Каталог банковских продуктов",
      "name": "06 OpenBanking: Products"
    },
    {
      "description": "Лидогенерация и управление потенциальными клиентами",
      "name": "07 OpenBanking: Customer Leads"
    },
    {
      "description": "Персональные предложения по продуктам",
      "name": "08 OpenBanking: Product Offers"
    },
    {
      "description": "Согласия на персональные предложения",
      "name": "09 OpenBanking: Product Offer Consents"
    },
    {
      "description": "Заявки клиентов на банковские продукты",
      "name": "10 OpenBanking: Product Applications"
    },
    {
      "description": "Договоры с продуктами (депозиты/кредиты/карты)",
      "name": "11 OpenBanking: Product Agreements"
    },
    {
      "description": "Внутренняя аутентификация (для UI банка)",
      "name": "Internal: Auth"
    },
    {
      "description": "Управление продуктами банка",
      "name": "Internal: Banker"
    },
    {
      "description": "Админ-панель и метрики",
      "name": "Internal: Admin"
    },
    {
      "description": "JWKS — публичные ключи для проверки JWT",
      "name": "Technical: Well-Known"
    }
  ]
}
